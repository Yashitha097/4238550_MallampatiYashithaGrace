#include <stdio.h>
#include<stdlib.h>
#include<string.h>
#define MAX 1000000
char *string_1;
char **history;
int S_top = -1;
void simple_text(){
    S_top++;
    history[S_top] = (char*)malloc(strlen(string_1)+1);
    strcpy(history[S_top],string_1);
}
int main(){
    int l,value,j;;
    scanf("%d",&l);
    string_1=(char*)malloc(MAX*sizeof(char*));
    history=(char**)malloc(MAX*sizeof(char*));
   string_1[0]='\0';
    for(int i=0;i<l;i++){
        
        scanf("%d",&value);
        if(value==1){
            char ch[1001];
            scanf("%s",ch);
            simple_text();
            strcat(string_1,ch);
        }
        else if (value==2){
           
            scanf("%d",&j);
            simple_text();
            int len = strlen(string_1);
            string_1[len-j] = '\0';
        }
        else if (value == 3){
          
            scanf("%d",&j);
            printf("%c\n",string_1[j-1]);
        }
        else if (value==4){
            if (S_top >= 0){
                strcpy(string_1,history[S_top]);
                S_top =S_top-1;
                
            }
        }
    }
    return 0;
}
